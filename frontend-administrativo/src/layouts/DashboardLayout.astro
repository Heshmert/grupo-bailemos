---
const { title } = Astro.props;
---
<html lang="es">
<head>
  <title>{title}</title>
</head>
<body>
  <div style="display: flex;">
    <aside id="sidebar-admin" style="display: none; width: 250px; background: #f0f0f0;">
      <nav>
        <h3>Admin</h3>
        <a href="/dashboard/directivo">Inicio</a>
        <button class="logout">Salir</button>
      </nav>
    </aside>

    <aside id="sidebar-instructor" style="display: none; width: 250px; background: #e0e0e0;">
      <nav>
        <h3>Instructor</h3>
        <a href="/dashboard/instructor">Mis Clases</a>
        <button class="logout">Salir</button>
      </nav>
    </aside>

    <main style="flex: 1; padding: 20px;">
      <slot />
    </main>
  </div>

  <script>
    const role = localStorage.getItem('role');
    const adminSide = document.getElementById('sidebar-admin') as HTMLElement;
    const instSide = document.getElementById('sidebar-instructor') as HTMLElement;

    // Mostrar la que toca
    if (role === '1' && adminSide) adminSide.style.display = 'block';
    if (role === '2' && instSide) instSide.style.display = 'block';

    // Logout
    document.querySelectorAll('.logout').forEach(btn => {
      btn.addEventListener('click', () => {
        localStorage.clear();
        window.location.href = '/';
      });
    });
  </script>
</body>
</html>